{
  "graph": "scopelock",
  "operations": [
    {
      "comment": "=== CHAT MESSAGES ===",
      "type": "create_node",
      "labels": ["U4_Event"],
      "properties": {
        "created_at": "2025-11-04T10:00:00Z",
        "updated_at": "2025-11-04T10:00:00Z",
        "valid_from": "2025-11-04T10:00:00Z",
        "valid_to": null,
        "name": "User asks Rafael for login API",
        "description": "Chat message from user to Rafael",
        "detailed_description": "User requests Rafael to generate complete login API implementation",
        "type_name": "U4_Event",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/EVENT-001",
        "proof_uri": "l4://proof/msg-47-1",
        "created_by": "chat-api",
        "substrate": "organizational",
        "event_kind": "message",
        "actor_ref": "person1@scopelock.ai",
        "timestamp": "2025-11-04T10:00:00Z",
        "status": "active",
        "slug": "msg-47-1",
        "citizen": "rafael",
        "sender": "user",
        "message_text": "Can you generate the login API?",
        "code_blocks": null
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Event"],
        "match_properties": {"slug": "msg-47-1"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-04T10:00:00Z",
        "updated_at": "2025-11-04T10:00:00Z",
        "valid_from": "2025-11-04T10:00:00Z",
        "valid_to": null,
        "confidence": 1.0,
        "energy": 0.7,
        "forming_mindstate": "conversation",
        "goal": "Technical guidance",
        "commitments": [],
        "visibility": "partners",
        "created_by": "chat-api",
        "substrate": "organizational"
      }
    },
    {
      "type": "create_node",
      "labels": ["U4_Event"],
      "properties": {
        "created_at": "2025-11-04T10:00:15Z",
        "updated_at": "2025-11-04T10:00:15Z",
        "valid_from": "2025-11-04T10:00:15Z",
        "valid_to": null,
        "name": "Rafael responds with login API code",
        "description": "Rafael provides complete implementation",
        "detailed_description": "Rafael generates login API with authentication logic and code examples",
        "type_name": "U4_Event",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/EVENT-001",
        "proof_uri": "l4://proof/msg-47-2",
        "created_by": "chat-api",
        "substrate": "organizational",
        "event_kind": "message",
        "actor_ref": "citizen:rafael",
        "timestamp": "2025-11-04T10:00:15Z",
        "status": "active",
        "slug": "msg-47-2",
        "citizen": "rafael",
        "sender": "citizen",
        "message_text": "Here's the complete login API implementation:\n\n```python\n@router.post('/login')\nasync def login(credentials: LoginRequest, db: Session = Depends(get_db)):\n    user = authenticate_user(db, credentials.email, credentials.password)\n    if not user:\n        raise HTTPException(status_code=401, detail='Invalid credentials')\n    token = create_access_token(user.id)\n    return {'access_token': token, 'token_type': 'bearer'}\n```",
        "code_blocks": "[{\"language\": \"python\", \"code\": \"@router.post('/login')\\nasync def login(credentials: LoginRequest, db: Session = Depends(get_db)):\\n    user = authenticate_user(db, credentials.email, credentials.password)\\n    if not user:\\n        raise HTTPException(status_code=401, detail='Invalid credentials')\\n    token = create_access_token(user.id)\\n    return {'access_token': token, 'token_type': 'bearer'}\"}]"
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Event"],
        "match_properties": {"slug": "msg-47-2"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-04T10:00:15Z",
        "updated_at": "2025-11-04T10:00:15Z",
        "valid_from": "2025-11-04T10:00:15Z",
        "valid_to": null,
        "confidence": 0.9,
        "energy": 0.8,
        "forming_mindstate": "code_generation",
        "goal": "Provide complete implementation",
        "commitments": [],
        "visibility": "partners",
        "created_by": "chat-api",
        "substrate": "organizational"
      }
    },
    {
      "type": "create_node",
      "labels": ["U4_Event"],
      "properties": {
        "created_at": "2025-11-04T14:00:00Z",
        "updated_at": "2025-11-04T14:00:00Z",
        "valid_from": "2025-11-04T14:00:00Z",
        "valid_to": null,
        "name": "User asks Sofia about tests",
        "description": "User asks Sofia about test status",
        "detailed_description": "User inquires about performance test status from Sofia",
        "type_name": "U4_Event",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/EVENT-001",
        "proof_uri": "l4://proof/msg-47-3",
        "created_by": "chat-api",
        "substrate": "organizational",
        "event_kind": "message",
        "actor_ref": "person1@scopelock.ai",
        "timestamp": "2025-11-04T14:00:00Z",
        "status": "active",
        "slug": "msg-47-3",
        "citizen": "sofia",
        "sender": "user",
        "message_text": "Are the performance tests passing?",
        "code_blocks": null
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Event"],
        "match_properties": {"slug": "msg-47-3"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-04T14:00:00Z",
        "updated_at": "2025-11-04T14:00:00Z",
        "valid_from": "2025-11-04T14:00:00Z",
        "valid_to": null,
        "confidence": 1.0,
        "energy": 0.6,
        "forming_mindstate": "quality_check",
        "goal": "Verify test status",
        "commitments": [],
        "visibility": "partners",
        "created_by": "chat-api",
        "substrate": "organizational"
      }
    },
    {
      "type": "create_node",
      "labels": ["U4_Event"],
      "properties": {
        "created_at": "2025-11-04T14:00:05Z",
        "updated_at": "2025-11-04T14:00:05Z",
        "valid_from": "2025-11-04T14:00:05Z",
        "valid_to": null,
        "name": "Sofia reports test failures",
        "description": "Sofia reports test status to user",
        "detailed_description": "Sofia provides detailed test run analysis with failure details",
        "type_name": "U4_Event",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/EVENT-001",
        "proof_uri": "l4://proof/msg-47-4",
        "created_by": "chat-api",
        "substrate": "organizational",
        "event_kind": "message",
        "actor_ref": "citizen:sofia",
        "timestamp": "2025-11-04T14:00:05Z",
        "status": "active",
        "slug": "msg-47-4",
        "citizen": "sofia",
        "sender": "citizen",
        "message_text": "The functional tests are passing (8/10), but 1 performance test is failing. The p95 response time is 2.3s, which exceeds the 2s threshold.",
        "code_blocks": null
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Event"],
        "match_properties": {"slug": "msg-47-4"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-04T14:00:05Z",
        "updated_at": "2025-11-04T14:00:05Z",
        "valid_from": "2025-11-04T14:00:05Z",
        "valid_to": null,
        "confidence": 0.95,
        "energy": 0.7,
        "forming_mindstate": "quality_analysis",
        "goal": "Report quality issues",
        "commitments": [],
        "visibility": "partners",
        "created_by": "chat-api",
        "substrate": "organizational"
      }
    },
    {
      "comment": "=== TEST RUNS ===",
      "type": "create_node",
      "labels": ["U4_Assessment"],
      "properties": {
        "created_at": "2025-11-03T10:00:00Z",
        "updated_at": "2025-11-03T10:05:00Z",
        "valid_from": "2025-11-03T10:00:00Z",
        "valid_to": null,
        "name": "Test Run - Mission 47 (Day 1)",
        "description": "Initial test run with all tests passing",
        "detailed_description": "Comprehensive test suite execution covering functional and performance criteria",
        "type_name": "U4_Assessment",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/TEST-001",
        "proof_uri": "l4://proof/test-run-47-1",
        "created_by": "test-runner",
        "substrate": "organizational",
        "domain": "performance",
        "assessor_ref": "test-runner",
        "score": 1.0,
        "method": "pytest",
        "scale": "pass_fail",
        "status": "active",
        "slug": "test-run-47-1",
        "test_status": "passed",
        "summary": "{\"functional_passed\": 10, \"functional_total\": 10, \"performance_passed\": 3, \"performance_total\": 3}",
        "results": "[{\"name\": \"test_send_message\", \"status\": \"passed\", \"duration\": 0.5}, {\"name\": \"test_receive_response\", \"status\": \"passed\", \"duration\": 0.8}]",
        "logs": "All tests passed"
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Assessment"],
        "match_properties": {"slug": "test-run-47-1"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-03T10:05:00Z",
        "updated_at": "2025-11-03T10:05:00Z",
        "valid_from": "2025-11-03T10:05:00Z",
        "valid_to": null,
        "confidence": 0.95,
        "energy": 0.6,
        "forming_mindstate": "quality_assurance",
        "goal": "Verify acceptance criteria",
        "commitments": [],
        "visibility": "partners",
        "created_by": "test-runner",
        "substrate": "organizational"
      }
    },
    {
      "type": "create_node",
      "labels": ["U4_Assessment"],
      "properties": {
        "created_at": "2025-11-04T15:00:00Z",
        "updated_at": "2025-11-04T15:05:00Z",
        "valid_from": "2025-11-04T15:00:00Z",
        "valid_to": null,
        "name": "Test Run - Mission 47 (Latest)",
        "description": "Latest test run with some failures",
        "detailed_description": "Test execution revealing performance issues and two functional test failures",
        "type_name": "U4_Assessment",
        "level": "L2",
        "scope_ref": "scopelock",
        "visibility": "partners",
        "commitments": [],
        "policy_ref": "l4://law/TEST-001",
        "proof_uri": "l4://proof/test-run-47-2",
        "created_by": "test-runner",
        "substrate": "organizational",
        "domain": "performance",
        "assessor_ref": "test-runner",
        "score": 0.77,
        "method": "pytest",
        "scale": "pass_fail",
        "status": "active",
        "slug": "test-run-47-2",
        "test_status": "failed",
        "summary": "{\"functional_passed\": 8, \"functional_total\": 10, \"performance_passed\": 2, \"performance_total\": 3}",
        "results": "[{\"name\": \"test_send_message\", \"status\": \"passed\", \"duration\": 0.5}, {\"name\": \"test_callback_handler\", \"status\": \"failed\", \"error\": \"KeyError: 'callback_data'\", \"duration\": 0.1}, {\"name\": \"test_code_blocks\", \"status\": \"failed\", \"error\": \"Syntax highlighting missing\", \"duration\": 0.2}, {\"name\": \"test_performance_p95\", \"status\": \"failed\", \"error\": \"p95 = 2.3s (threshold: 2s)\", \"duration\": 5.0}]",
        "logs": "Functional: 8/10 passed, Performance: 2/3 passed"
      },
      "id_field": "slug"
    },
    {
      "type": "create_link",
      "link_type": "U4_ABOUT",
      "from_node": {
        "labels": ["U4_Assessment"],
        "match_properties": {"slug": "test-run-47-2"}
      },
      "to_node": {
        "labels": ["U4_Work_Item"],
        "match_properties": {"slug": "mission-47"}
      },
      "properties": {
        "created_at": "2025-11-04T15:05:00Z",
        "updated_at": "2025-11-04T15:05:00Z",
        "valid_from": "2025-11-04T15:05:00Z",
        "valid_to": null,
        "confidence": 0.9,
        "energy": 0.8,
        "forming_mindstate": "quality_assurance",
        "goal": "Identify issues before delivery",
        "commitments": [],
        "visibility": "partners",
        "created_by": "test-runner",
        "substrate": "organizational"
      }
    }
  ]
}
